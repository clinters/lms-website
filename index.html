<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Last Man Standing</title>

  <!-- ✅ Meta domain verification -->
  <meta name="facebook-domain-verification" content="<meta name="facebook-domain-verification" content="np8s6t2eqok369m30di72zjtgcoc2d" />" />

  <!-- ✅ Favicon -->
  <link rel="icon" type="image/x-icon" href="favicon.ico" />

  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header>
    <h1>Last Man Standing</h1>
    <nav>
      <a href="#" onclick="openModal('rulesModal')">Rules</a>
      <a href="#" onclick="openModal('privacyModal')">Privacy Policy</a>
    </nav>
  </header>

  <main>
    <h2>Register</h2>
    <form id="registrationForm">
      <label for="name">Name</label>
      <input type="text" id="name" name="name" required />

      <label for="whatsapp">WhatsApp Number (+44...)</label>
      <input type="tel" id="whatsapp" name="whatsapp" required />

      <button type="submit">Register</button>
    </form>
    <div id="formMessage"></div>
  </main>

  <!-- Rules Modal -->
  <div id="rulesModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal('rulesModal')">&times;</span>
      <h2>Rules</h2>
      <ul>
        <li>For each full set of fixtures you choose ONE Prem League team to WIN. A defeat or a draw and you lose a life.</li>
        <li>Your entry gets 2 lives so fear not, a naff selection in Week 1 and you're still in the game!</li>
        <li>Deadline each week for selections is Friday 6pm via WhatsApp. If no selection, your highest unused team will be your default.</li>
        <li>I message all players before and after each set of games with a spreadsheet confirming selections.</li>
        <li>You cannot use the same team twice unless the game lasts 20+ weeks. Average lifespan is around 10 weeks.</li>
        <li>If a game is postponed after the deadline the Pools Panel result is used. If before the deadline, you must reselect.</li>
        <li>Players may propose pot splits later in the game — only valid if all remaining players agree.</li>
        <li>If the pot is not won it rolls into the next game.</li>
        <li>Last person left wins the pot!</li>
      </ul>
    </div>
  </div>

  <!-- Privacy Policy Modal -->
  <div id="privacyModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal('privacyModal')">&times;</span>
      <h2>Privacy Policy</h2>
      <p>We collect your name and WhatsApp number solely to manage participation in the Last Man Standing game. Your details will never be shared outside of the game admin. By registering, you consent to receiving WhatsApp reminders and updates about the competition.</p>
    </div>
  </div>

  <script>
    const form = document.getElementById('registrationForm');
    const formMessage = document.getElementById('formMessage');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      formMessage.textContent = "Submitting...";
      
      try {
        const response = await fetch("https://script.google.com/macros/s/AKfycbz5vb3AIYTjD7BRk7yHIx4zDrtqUasjtcMLf0NDQunX2Mmt_FIJZGNWcqr9I8h0Yg8/exec", {
          method: "POST",
          body: new FormData(form),
        });
        const text = await response.text();
        if (response.ok) {
          formMessage.textContent = "✅ Registration successful! You’ll receive a WhatsApp confirmation shortly.";
          form.reset();
        } else {
          formMessage.textContent = "⚠️ Error: " + text;
        }
      } catch (err) {
        formMessage.textContent = "⚠️ Network error – please try again.";
      }
    });

    function openModal(id) {
      document.getElementById(id).style.display = "block";
    }
    function closeModal(id) {
      document.getElementById(id).style.display = "none";
    }
  </script>

  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; }
    header { background: #222; color: #fff; padding: 1em; display: flex; justify-content: space-between; align-items: center; }
    nav a { color: #fff; margin-left: 1em; text-decoration: none; }
    main { padding: 2em; max-width: 600px; margin: auto; }
    form { display: flex; flex-direction: column; }
    label { margin-top: 1em; }
    input { padding: 0.5em; margin-top: 0.3em; }
    button { margin-top: 1.5em; padding: 0.7em; background: #007bff; color: white; border: none; cursor: pointer; }
    button:hover { background: #0056b3; }
    #formMessage { margin-top: 1em; font-weight: bold; }
    .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); }
    .modal-content { background: #fff; margin: 10% auto; padding: 2em; width: 80%; max-width: 500px; border-radius: 6px; }
    .close { float: right; font-size: 1.5em; cursor: pointer; }
  </style>
</body>
</html>